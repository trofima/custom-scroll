"use strict";var CustomScroll=function(){function t(e,s){var n=this;this.nodes={el:null,shifted:null,content:null,bar:null,thumb:null},this.document={el:null,listeners:[]},this.listeners={},this.thumb={y:0},t.supportedEventTypes.forEach(function(t){return n.listeners[t]=[]}),this.setNodes(e),this.observeDOMMutation(s)}return t.checkEvent=function(t){function e(t){for(var e=[],s=1;s<arguments.length;s++)e[s-1]=arguments[s];for(var n="",o=0;o<e.length;o++)n+=t[o]+e[o];return n+=t[e.length],n.split(/(?:\r\n|\n|\r)/).map(function(t){return t.replace(/^\s+/gm,"")}).join("\n")}if(-1===this.supportedEventTypes.indexOf(t))throw new TypeError((s=["\n							Event type '","' is not supported.\n							Supported events are: ",".\n						"],s.raw=["\n							Event type '","' is not supported.\n							Supported events are: ",".\n						"],e(s,t,this.supportedEventTypes.join(", "))));var s},t.prototype.addListener=function(e,s){t.checkEvent(e),this.listeners[e].push(s)},t.prototype.setNodes=function(t){this.nodes.el=t,this.nodes.shifted=t.querySelector(".shifted"),this.nodes.content=this.nodes.shifted.querySelector(".content"),this.nodes.bar=t.querySelector(".bar"),this.nodes.thumb=this.nodes.bar.querySelector(".thumb")},t.prototype.observeDOMMutation=function(t){var e=this,s=new t(function(){return e.update()});s.observe(this.nodes.content,{childList:!0,attributes:!0,subtree:!0})},t.prototype.update=function(){this.nodes.shifted.scrollHeight>this.nodes.el.offsetHeight?this.show():this.hide()},t.prototype.hide=function(){this.nodes.el.classList.remove("visible")},t.prototype.show=function(){var t=Math.pow(this.nodes.el.offsetHeight,2)/this.nodes.shifted.scrollHeight+"px";this.nodes.el.classList.add("visible"),this.nodes.thumb.style.setProperty("height",t),this.invokeListenersFor("change")},t.prototype.addEventListeners=function(){var t=this;this.nodes.shifted.addEventListener("scroll",function(){t.moveThumb(),t.invokeListenersFor("scroll")}),this.nodes.thumb.addEventListener("mousedown",function(e){return t.startThumbDragging(e)})},t.prototype.moveThumb=function(){var t=this.nodes.bar.offsetHeight*this.nodes.shifted.scrollTop/this.nodes.shifted.scrollHeight;this.nodes.thumb.style.setProperty("top",t+"px")},t.prototype.invokeListenersFor=function(t){var e=this.nodes.shifted;this.listeners[t].forEach(function(t){return t({offsetHeight:e.offsetHeight,scrollHeight:e.scrollHeight,scrollTop:e.scrollTop})})},t.prototype.startThumbDragging=function(t){var e=this;this.nodes.el.classList.add("thumb-drugging"),this.thumb.y=t.screenY,this.addDocumentEventListener("mousemove",function(t){return e.dragThumb(t)}),this.addDocumentEventListener("mouseup",function(t){return e.finishThumbDragging(t)}),t.preventDefault()},t.prototype.addDocumentEventListener=function(t,e){this.document.listeners.push({name:t,callback:e}),this.document.el.addEventListener(t,e)},t.prototype.dragThumb=function(t){var e=(t.screenY-this.thumb.y)*this.nodes.shifted.scrollHeight/this.nodes.bar.offsetHeight;this.thumb.y=t.screenY,this.nodes.shifted.scrollTop+=e,t.preventDefault()},t.prototype.finishThumbDragging=function(t){var e=this;this.nodes.el.classList.remove("thumb-drugging"),this.document.listeners.forEach(function(t){return e.document.el.removeEventListener(t.name,t.callback)}),t.preventDefault()},t.supportedEventTypes=["scroll","change"],t}();exports.CustomScroll=CustomScroll;